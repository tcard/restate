const Restate=(()=>{function a(a,b,e){"string"==typeof e?e?(c.call(a,b,e),"value"===b&&(a.value=e)):d.call(a,b):a[b]=e}function b(c){if(!(c instanceof Array))return k.call(document,c.toString());let[d,g,h]=c,i=j.call(document,d);for(let b in g)a(i,b,g[b]);return h.forEach(a=>{f.call(i,b(a))}),i}let{setAttribute:c,removeAttribute:d,appendChild:f,removeChild:g,replaceChild:h,insertBefore:i}=Element.prototype,{createElement:j,createTextNode:k}=document,l=null;return l&&(c=function(a,b){return l({type:"setAttribute",element:this,name:a,value:b}),this.setAttribute(a,b)},d=function(a){l({type:"removeAttribute",element:this,name:a}),this.removeAttribute(a)},f=function(a){return l({type:"appendChild",parent:this,child:a}),this.appendChild(a)},g=function(a){return l({type:"removeChild",parent:this,child:a}),this.removeChild(a)},h=function(a,b){return l({type:"replaceChild",parent:this,newChild:a,oldChild:b}),this.replaceChild(a,b)},i=function(a,b){return l({type:"insertBefore",parent:this,newChild:a,refChild:b}),this.insertBefore(a,b)},j=function(a){let b=this.createElement(a);return l({type:"createElement",element:b}),b},k=function(a){let b=this.createTextNode(a);return l({type:"createTextNode",node:b}),b}),(c,d,e,...j)=>{function k(a){return a}for(;c.firstChild;)g.call(c,c.firstChild);let l=(c,d,e,j)=>{var k=Math.max;if(e===j);else if(void 0===j)g.call(c,d);else if(void 0===e)f.call(c,b(j));else if(!(j instanceof Array))e!=j&&h.call(c,b(j),d);else{let[f,g,m]=e,[n,o,p]=j;if(f!=n)return void h.call(c,b(j),d);let q=Object.keys(o);q.sort();let r=0,s=Object.keys(g);s.sort(),q.concat([void 0]).forEach(b=>{for(;r<=s.length;){let c=s[r],e=g[c],f=o[b];if(c==b)return e!=f&&a(d,b,f),void r++;if(void 0===b||b>c){a(d,c,null),r++;continue}return void a(d,b,f)}});let t=new Map;p.forEach((a,b)=>{t.set(a,b)});let u=new Map;m.forEach((a,b)=>{let c=u.get(b);void 0!==c&&(b=c);let d=t.get(a);void 0===d||d===b||u.set(d,b)}),u.forEach((a,b)=>{if(a>b){let c=a;b=a,a=c}let d=m[a];m[a]=m[b],m[b]=d;let e=c.childNodes[a],f=c.childNodes[b],g=f.nextSibling;i.call(c,f,e),i.call(c,e,g)});let w=[];Array.prototype.forEach.call(d.childNodes,a=>w.push(a));for(let a=0;a<k(p.length,m.length);a++)l(d,w[a],m[a],p[a])}};const m=(()=>{let a;return b=>{l(c,c.childNodes[0],a,b),a=b}})();let n={};const o=(a,b,c,f,g,h)=>{let[i,...l]=f;1==f.length&&(c={}),c.children=c.children||(a instanceof Array?[]:{});let p={parent:h||null,root:g,child:d=>{if(void 0===a)return null;let e=k(c.children),f=e[d];return void 0===f&&(f={},e[d]=f),o(a[d],[...b,d],f,d===i?l:[],g,p)},state:a,set:a=>{let c=d;b.forEach((d,e)=>{e==b.length-1?c[d]=a:c=c[d]}),m(e(o(d,[],n,b),...j))},present:(a,...b)=>{let d=c.cached;return void 0!==d&&d[0]===a&&0==b.filter((a,b)=>d[1][b]!==a).length?d[2]:a(p,...b)}};return void 0===g&&(p.root=p,g=p),p};m(e(o(d,[],n,[])))}})();